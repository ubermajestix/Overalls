(function(b){function a(c,f){overalls=this;overalls.close=h;overalls.opacity=0.6;overalls.color="#1d1d1d";g(f);d("overalls: ",overalls);h();z_index=e();transparency_css={position:"fixed",top:0,left:0,width:"100%",height:"100%",opacity:0,zIndex:z_index,background:overalls.color};transparency_div=b('<div id="overalls-transparency"></div>').css(transparency_css).click(function(){h()}).appendTo("body");super_transparent_css={position:"absolute",top:0,left:0,width:"100%",height:"0",zIndex:z_index+1,background:"transparent"};super_transparent_div=b('<div id="overalls-super-transparent"></div>').css(super_transparent_css).appendTo("body");overlay_css={background:"#fff",color:"#1d1d1d",height:"350px",width:"650px",padding:"20px",zIndex:z_index+2,opacity:1};overlay_div=b('<div id="overalls-overlay"></div>');if(f.blank==true){}else{if(f.cssClass){d("adding css class",f.cssClass);overlay_div.addClass(f.cssClass)}else{overlay_div.css(overlay_css)}}overlay_div.appendTo(super_transparent_div).html(c);default_margin={marginTop:b(document).scrollTop(),marginLeft:"auto",marginRight:"auto"};centering_margin=b(window).height()/2-b("div#overalls-overlay").height()/2;if(centering_margin>0){default_margin.marginTop=default_margin.marginTop+centering_margin}else{default_margin.marginTop=default_margin.marginTop+30}overlay_div.css(default_margin);if(f.blank==true){overlay_div.css({width:b(overlay_div).children(":first").width()})}b(transparency_div).fadeTo("slow",overalls.opacity);b(overlay_div).fadeTo("slow",1);b(document).bind("keyup.overalls",function(i){if(i.keyCode==27){h()}});function h(){d("taking the overalls off");b(document).unbind("keyup.overalls");all_divs=b("div#overalls-transparency, div#overalls-super-transparent, div#overalls-overlay").fadeOut(600);setTimeout(function(){all_divs.remove()},650)}function e(){z=0;b("*").each(function(){current=parseInt(b(this).css("zIndex"));z=current>z?current:z});return z+1}function g(i){if(i.opacity){overalls.opacity=i.opacity}if(i.color){overalls.color=i.color}}function d(){if(window.console){console.log.apply(console,arguments)}}}b.overalls=function(d,e){if(!e){e={}}var c=new a(d,e);close:function(){c.close()}return c};b.overalls.close=function(){log("taking the overalls off");b(document).unbind("keyup.overalls");all_divs=b("div#overalls-transparency, div#overalls-super-transparent, div#overalls-overlay").fadeOut(600);setTimeout(function(){all_divs.remove()},650)}})(jQuery);